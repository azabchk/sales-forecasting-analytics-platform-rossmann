# Model Card: Прогнозирование ежедневных продаж Rossmann

## 1. Назначение модели

Модель предназначена для прогнозирования ежедневной выручки (`sales`) по конкретному магазину (`store_id`) на горизонт `N` дней (по умолчанию 30).

Сценарий применения:
- аналитическая панель интернет-магазина/ритейла;
- планирование промо-активностей;
- оценка ожидаемой нагрузки по магазинам.

## 2. Данные

Источник: Rossmann Store Sales (Kaggle).

Используемые таблицы DWH:
- `fact_sales_daily`
- `dim_date`
- `dim_store`

Гранулярность: день, магазин.

Целевая переменная:
- `sales`.

## 3. Признаки

- Лаговые признаки: `lag_1`, `lag_7`, `lag_14`, `lag_28`
- Скользящие средние: `rolling_mean_7`, `rolling_mean_14`, `rolling_mean_28`
- Календарные: день недели, месяц, квартал, номер недели, признак выходного
- Промо/праздники: `promo`, `state_holiday`, `school_holiday`, `open`
- Метаданные магазина: `store_type`, `assortment`, `competition_distance`, `promo2`

## 4. Алгоритмы

Сравниваются две модели:
- Baseline: `Ridge`
- Advanced: `CatBoostRegressor`

Выбор лучшей модели выполняется по метрике RMSE на валидационном периоде.

## 5. Оценка качества

Метрики:
- MAE
- RMSE

Схема валидации:
- time-based split (последние `validation_days` дней как validation)
- случайное перемешивание не используется.

Актуальные значения метрик сохраняются в `ml/artifacts/model_metadata.json`.

## 6. Ограничения

- Прогноз строится рекурсивно, будущие значения promo/holiday по умолчанию задаются константами.
- На больших горизонтах ошибка может накапливаться.
- Модель чувствительна к пропускам и аномалиям в исходных данных.

## 7. Риски и ответственное использование

- Нельзя использовать прогноз как единственный источник управленческих решений.
- Для production необходимо регулярное переобучение и мониторинг drift.
- Рекомендуется сравнивать прогноз модели с экспертной оценкой бизнеса.

## 8. Версионирование

- Артефакт модели: `ml/artifacts/model.joblib`
- Метаданные: `ml/artifacts/model_metadata.json`
- Дата обучения и набор признаков логируются в метаданных.
